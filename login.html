<!doctype html>
<html>
<body>

<button id="loginGithub">Login com GitHub</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAuth, GithubAuthProvider, signInWithPopup } 
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAnTdYwFqsMgKPSlsY8HUnznFJj3zEhn5w",
  authDomain: "contabilidade-flatoutpy.firebaseapp.com",
  projectId: "contabilidade-flatoutpy",
  storageBucket: "contabilidade-flatoutpy.appspot.com",
  messagingSenderId: "540834879646",
  appId: "1:540834879646:web:7528028fdf1378438ac38f",
  measurementId: "G-MZSN6NVK4T"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GithubAuthProvider();

document.getElementById('loginGithub').onclick = async () => {
  try {
    const result = await signInWithPopup(auth, provider);
    console.log('Usuário logado:', result.user);
    location.href = "/db/"; // redireciona para a área protegida
  } catch (error) {
    console.error('Erro no login:', error);
    alert('Falha no login. Tente novamente.');
  }
};
</script>

</body>
</html>